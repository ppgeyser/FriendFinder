<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Survey | EarBuds</title>

    <!-- CDNs -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <script type="text/javascript" src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"
        integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous">
    </script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"
        integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous">
    </script>
</head>

<body>
    <br>
    <div class="container">

        <div class="card">
            <h5 class="card-header">Survey Questions</h5>
            <div class="card-body">

                <form id="form">
                    <p class="font-weight-bolder">About You</p>
                    <p>Please fill in your name and provide a URL to a profile picture of your choice. To get a profile picture URL, you can go to any social media site that has your profile picture, right-click on the picture, and then click "Copy image address."</p>
                    <hr>
                    <div class="form-group">
                        <label for="inputName">Name (Required)</label>
                        <input type="text" class="form-control" id="inputName" placeholder="Name">
                    </div>
                    <div class="form-group">
                        <label for="inputImageURL">Profile Picture (Required)</label>
                        <input type="text" class="form-control" id="inputImageURL"
                            placeholder="Insert URL of your profile picture here.">
                    </div>
                    <hr>
                    <p class="font-weight-bolder">Survey</p>
                    <p>Please read each of the statements carefully, and then use the slider to indicate your opinion regarding the statement. The slider ranges from "Strongly Disagree" to "Strongly Agree." All questions are required.</p>
                    <hr>
                    <br>
                    <div class="form-group">
                        <label for="Statement1" class="font-weight-bold">1) EDM is love, EDM is life.</label>
                        <input type="range" class="custom-range" min="0" max="5" id="Statement1">
                        <span class="float-left">Strongly Disagree</span><span class="float-right">Strongly Agree</span>
                    </div>
                    <br>
                    <br>
                    <div class="form-group">
                        <label for="Statement2" class="font-weight-bold">2) Music can still be good without having to be technical or intricate.</label>
                        <input type="range" class="custom-range" min="0" max="5" id="Statement2">
                        <span class="float-left">Strongly Disagree</span><span class="float-right">Strongly Agree</span>
                    </div>
                    <br>
                    <br>
                    <div class="form-group">
                        <label for="Statement3" class="font-weight-bold">3) You was born in the wrong era of music.</label>
                        <input type="range" class="custom-range" min="0" max="5" id="Statement3">
                        <span class="float-left">Strongly Disagree</span><span class="float-right">Strongly Agree</span>
                    </div>
                    <br>
                    <br>
                    <div class="form-group">
                        <label for="Statement4" class="font-weight-bold">4) The Beatles are overrated.</label>
                        <input type="range" class="custom-range" min="0" max="5" id="Statement4">
                        <span class="float-left">Strongly Disagree</span><span class="float-right">Strongly Agree</span>
                    </div>
                    <br>
                    <br>
                    <div class="form-group">
                        <label for="Statement5" class="font-weight-bold">5) You prefer listening to full albums rather than individual songs or playlists.</label>
                        <input type="range" class="custom-range" min="0" max="5" id="Statement5">
                        <span class="float-left">Strongly Disagree</span><span class="float-right">Strongly Agree</span>
                    </div>
                    <br>
                    <br>
                    <div class="form-group">
                        <label for="Statement6" class="font-weight-bold">6) Soundcloud > Spotify</label>
                        <input type="range" class="custom-range" min="0" max="5" id="Statement6">
                        <span class="float-left">Strongly Disagree</span><span class="float-right">Strongly Agree</span>
                    </div>
                    <br>
                    <br>
                    <div class="form-group">
                        <label for="Statement7" class="font-weight-bold">7) Your main method of music discovery is by reading Pitchfork, watching theneedledrop, etc.</label>
                        <input type="range" class="custom-range" min="0" max="5" id="Statement7">
                        <span class="float-left">Strongly Disagree</span><span class="float-right">Strongly Agree</span>
                    </div>
                    <br>
                    <br>
                    <div class="form-group">
                        <label for="Statement8" class="font-weight-bold">8) You know all the words to every single song on the Top 40 list.</label>
                        <input type="range" class="custom-range" min="0" max="5" id="Statement8">
                        <span class="float-left">Strongly Disagree</span><span class="float-right">Strongly Agree</span>
                    </div>
                    <br>
                    <br>
                    <div class="form-group">
                        <label for="Statement9" class="font-weight-bold">9) You unironically rocked a bucket hat in the early 2010s.</label>
                        <input type="range" class="custom-range" min="0" max="5" id="Statement9">
                        <span class="float-left">Strongly Disagree</span><span class="float-right">Strongly Agree</span>
                    </div>
                    <br>
                    <br>
                    <div class="form-group">
                        <label for="Statement10" class="font-weight-bold">10) You like listening to Jimi Hendrix because he is a guitar god.</label>
                        <input type="range" class="custom-range" min="0" max="5" id="Statement10">
                        <span class="float-left">Strongly Disagree</span><span class="float-right">Strongly Agree</span>
                    </div>
                    <br>
                    <br>
                    <a href="#" class="btn btn-primary" id="submit-button">Submit</a>
                </form>
            </div>
        </div>
        <br>
        <footer class="footer">
            <div class="container">
                <p><a href="/api/friends">API Friends List</a> | <a
                        href="https://github.com/afhaque/friendfinder">GitHub Repo</a></p>
            </div>
        </footer>

    </div>
    <!-- Modal code goes here -->
    <div class="modal fade" id="blankModal" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Error!</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    Text box cannot be blank.
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="resultsModal" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Best Match!</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <h2 id="match-name"></h2>
                    <img id="match-img" src="" alt="">
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
</body>

</html>

<script type="text/javascript">
// Submit button on click
$("#submit-button").on("click", function() {

    event.preventDefault();

    //input validation
    if ($("#inputName").val().length === 0) {
        //alert blank input
        $('#blankModal').modal();

    } else if ($("#inputImageURL").val().length === 0) {
        //alert blank input
        $('#blankModal').modal();

    } else {

        // create new object to store data from name, image url, and answers
        var newFriend = {
            name: $("#inputName").val().trim(),
            photo: $("#inputImageURL").val().trim(),
            //answers should be an array
            scores: [
                $("#Statement1").val(),
                $("#Statement2").val(),
                $("#Statement3").val(),
                $("#Statement4").val(),
                $("#Statement5").val(),
                $("#Statement6").val(),
                $("#Statement7").val(),
                $("#Statement8").val(),
                $("#Statement9").val(),
                $("#Statement10").val()
                ]
        };
            
        console.log(newFriend);

        // $.post data to /api/friends
        $.post("/api/friends", newFriend, function(data) {

        // callback: 
            //return the person most similar to the person we just sent to API. Person should then populate in modal.
            $("#match-name").text(data.name);
            $("#match-img").attr("src", data.photo);

            // Show the modal with the best match
            $("#resultsModal").modal("toggle");

        });

    };

});


</script>

